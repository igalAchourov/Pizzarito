<div class="container">
  <div class="row justify-content-center">
    <div class="col-4">
      <form [formGroup]="registerForm" (ngSubmit)="register()" *ngIf="!submitted">
        <h1 class="text-center">Sign Up</h1>
        <div class="form-group">
          <input type="text" class="form-control is-invalid" formControlName="userName" placeholder="User name"
            [ngClass]="{
              'is-invalid':
                registerForm.get('userName').errors &&
                registerForm.get('userName').touched
            }" />
          <div class="invalid-feedback">Please choose a username</div>
        </div>

        <div class="form-group">
          <input type="text" class="form-control is-invalid" formControlName="fullName" placeholder="Full name"
            [ngClass]="{
              'is-invalid':
                registerForm.get('fullName').errors &&
                registerForm.get('fullName').touched
            }" />
          <div class="invalid-feedback">Please enter your full name</div>
        </div>

        <div class="form-group">
          <input type="email" class="form-control is-invalid" formControlName="email" placeholder="Email " [ngClass]="{
              'is-invalid':
                registerForm.get('email').errors &&
                registerForm.get('email').touched
            }" />
          <div class="invalid-feedback">Please enter valid email</div>
        </div>

        <div class="form-group">
          <input type="password" formControlName="password" class="form-control is-invalid" placeholder="Password"
            [ngClass]="{
              'is-invalid':
                registerForm.get('password').errors &&
                registerForm.get('password').touched
            }" />
          <div class="invalid-feedback" *ngIf="
              registerForm.get('password').hasError('required') &&
              registerForm.get('password').touched
            ">
            Password is required
          </div>
          <div class="invalid-feedback" *ngIf="
              registerForm.get('password').hasError('minlength') &&
              registerForm.get('password').touched
            ">
            Password must be at least 6 characters
          </div>
          <div class="invalid-feedback" *ngIf="
              registerForm.get('password').hasError('maxlength') &&
              registerForm.get('password').touched
            ">
            Password cannot be more than 20 characters
          </div>
        </div>
        <div class="form-group">
          <input type="password" formControlName="confirmPassword" class="form-control is-invalid"
            placeholder="Confirm Password" [ngClass]="{
              'is-invalid':
                (registerForm.get('confirmPassword').errors &&
                  registerForm.get('confirmPassword').touched) ||
                (registerForm.hasError('mismatch') &&
                  registerForm.get('confirmPassword').touched)
            }" />

          <div class="invalid-feedback" *ngIf="
              registerForm.get('confirmPassword').hasError('required') &&
              registerForm.get('confirmPassword').touched
            ">
            Confirm password is required
          </div>
          <div class="invalid-feedback" *ngIf="
              registerForm.hasError('mismatch') &&
                registerForm.get('confirmPassword').touched;
              confirm: password;
              is: required
            ">
            Passwords must match
          </div>
        </div>
        <h3>Address</h3>
        <div formGroupName="address">
          <div class="form-group">
            <input type="text" class="form-control is-invalid" formControlName="city" placeholder="City" [ngClass]="{
                'is-invalid':
                  registerForm.get('address').get('city').errors &&
                  registerForm.get('address').get('city').touched
              }" />
            <div class="invalid-feedback">Please enter city name</div>
          </div>
          <div class="form-group">
            <input type="text" class="form-control is-invalid" formControlName="streetName" placeholder="Street "
              [ngClass]="{
                'is-invalid':
                  registerForm.get('address').get('streetName').errors &&
                  registerForm.get('address').get('streetName').touched
              }" />
            <div class="invalid-feedback">Please enter street name</div>
          </div>
          <div class="form-group">
            <input type="text" class="form-control is-invalid" formControlName="streetNumber" placeholder="House number"
              [ngClass]="{
                'is-invalid':
                  registerForm.get('address').get('streetNumber').errors &&
                  registerForm.get('address').get('streetNumber').touched
              }" />
            <div class="invalid-feedback">Please enter house number</div>
          </div>
          <div class="form-group">
            <input type="number" class="form-control" formControlName="floor" placeholder="Floor" />
          </div>
          <div class="form-group">
            <input type="text" class="form-control" formControlName="apartment" placeholder="Apartment" />
          </div>
        </div>
        <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->

        <ngx-recaptcha2 #captchaElem
        [siteKey]="siteKey"
        formControlName="recaptcha">
      </ngx-recaptcha2>




        <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->

        <div class="form-group text-center">
          <button class="btn btn-success mr-1" type="submit" [disabled]="registerForm.invalid">
            Register
          </button>

          <button class="btn btn-danger" type="button" (click)="reset()">
            Reset
          </button>
        </div>
      </form>
    </div>

  </div>
  <div class="row justify-content-center">
    <div class="col-8" *ngIf="submitted" style="margin-top: 20%; font-size: larger;">
      <p>Thank you for registration you will redirect to menu, click <a [routerLink]="['/menu']">here</a> if not
        redirected.</p>
    </div>
  </div>
</div>
